// Generated by CoffeeScript 1.6.3
(function() {
  "use strict";
  var app;

  app = angular.module("myApp", ["ngRoute", "myApp.filters", "myApp.services", "myApp.controllers"]);

  app.config([
    "$routeProvider", function($routeProvider) {
      $routeProvider.when("/view1", {
        templateUrl: "templates/input_fields.html",
        controller: "MyCtrl1",
        access: {
          isFree: false
        }
      });
      $routeProvider.when("/sign_in", {
        templateUrl: "templates/sign_in.html",
        controller: "SignInController"
      }, {
        isFree: true
      });
      $routeProvider.when("/sign_up", {
        templateUrl: "templates/sign_up.html",
        controller: "SignUpController"
      }, {
        isFree: true
      });
      $routeProvider.when("/form_fill_up", {
        templateUrl: "templates/form_fill_up.html",
        controller: "FormController"
      }, {
        isFree: false
      });
      $routeProvider.when("/all_forms", {
        templateUrl: "templates/allForms.html",
        controller: "FormDisplayController"
      }, {
        isFree: false
      });
      return $routeProvider.otherwise({
        redirectTo: "/sign_in"
      });
    }
  ]);

  app.run(function($rootScope, $location, User) {
    var _this = this;
    return $rootScope.$watch(function() {
      return $location.path();
    }, function(next, prev) {
      if (!User.authenticated && !(next === '/sign_in' || next === '/sign_up')) {
        return $location.path("/sign_in");
      }
    });
  });

}).call(this);
