// Generated by CoffeeScript 1.6.3
(function() {
  "use strict";
  var app, isDeveloper;

  isDeveloper = true;

  app = angular.module("myApp", ["ionic", "myApp.filters", "myApp.services", "myApp.controllers", "myApp.directives", "ngRoute", "LocalStorageModule"]);

  app.config([
    "$routeProvider", function($routeProvider) {
      $routeProvider.when("/view1", {
        templateUrl: "partials/input_fields.html",
        controller: "MyCtrl1",
        access: {
          isFree: isDeveloper
        }
      });
      $routeProvider.when("/sign_in", {
        templateUrl: "partials/sign_in.html",
        controller: "SignInController"
      }, {
        isFree: true
      });
      $routeProvider.when("/sign_up", {
        templateUrl: "partials/sign_up.html",
        controller: "SignUpController"
      }, {
        isFree: true
      });
      $routeProvider.when("/form/:_id", {
        templateUrl: "partials/form.html",
        controller: "FormController"
      }, {
        isFree: isDeveloper
      });
      $routeProvider.when("/all_forms", {
        templateUrl: "partials/allForms.html",
        controller: "FormDisplayController"
      }, {
        isFree: isDeveloper
      });
      $routeProvider.when("/mydata", {
        templateUrl: "partials/mydata.html",
        controller: "MyDataController"
      }, {
        isFree: isDeveloper
      });
      $routeProvider.when("/logout", {
        templateUrl: "partials/sign_in.html",
        controller: "LogoutController"
      }, {
        isFree: true
      });
      return $routeProvider.otherwise({
        redirectTo: "/sign_in"
      });
    }
  ]);

  app.run(function($rootScope, $location, User) {
    var _this = this;
    return $rootScope.$watch(function() {
      return $location.path();
    }, function(next, prev) {
      if (!User.authenticated && $location.path().search("sign") === -1) {
        console.log($location.path());
        console.log("sending to sign in");
        return $location.path("/sign_in");
      }
    });
  });

}).call(this);
